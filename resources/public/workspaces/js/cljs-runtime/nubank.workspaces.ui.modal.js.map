{"version":3,"sources":["nubank/workspaces/ui/modal.cljs"],"mappings":"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","names":["nubank.workspaces.ui.modal/render-subtree-into-container","parent","c","node","js/ReactDOM.unstable_renderSubtreeIntoContainer","nubank.workspaces.ui.modal/$","s","js/document","nubank.workspaces.ui.modal/create-portal-node","props","G__72081","goog.dom/createElement","goog.style/setStyle","cljs.core/clj->js","goog.dom/append","goog.dom/insertSiblingAfter","nubank.workspaces.ui.modal/portal-render-children","children","cljs.core.apply","com.fulcrologic.fulcro-css.localized-dom/div","options__55349__auto__","com.fulcrologic.fulcro.components/wrapped-render","com.fulcrologic.fulcro.components/props","js/nubank","js/nubank.workspaces","js/nubank.workspaces.ui","js/nubank.workspaces.ui.modal","js/nubank.workspaces.ui.modal.Portal","props__55350__auto__","this__55351__auto__","temp__5751__auto__","cljs.core.get","init-state__55352__auto__","obj72100","G__72101","G__72102","goog.object/get","obj72104","com.fulcrologic.fulcro.components/configure-component!","nubank.workspaces.ui.modal/Portal","this","_","goog.object/set","com.fulcrologic.fulcro.components/children","temp__5753__auto__","js/ReactDOM.unmountComponentAtNode","goog.dom/removeNode","com.fulcrologic.fulcro-css.localized-dom/noscript","nubank.workspaces.ui.modal/portal","com.fulcrologic.fulcro.components.factory","js/nubank.workspaces.ui.modal.WidgetContent","obj72117","G__72118","G__72119","obj72121","nubank.workspaces.ui.modal/WidgetContent","com.fulcrologic.fulcro_css.localized_dom.div","nubank.workspaces.ui.modal/widget-content","map__72133","cljs.core/PROTOCOL_SENTINEL","cljs.core/hash-map","js/nubank.workspaces.ui.modal.Modal","obj72150","G__72151","G__72152","obj72154","nubank.workspaces.ui.modal/Modal","on-close","cljs.core/identity","G__72137","G__72138","G__72139","nubank.workspaces.ui.events/dom-listener","e","cljs.core._EQ_","nubank.workspaces.ui.modal/modal"],"sourcesContent":["(ns nubank.workspaces.ui.modal\n  (:require [goog.dom :as gdom]\n            [goog.object :as gobj]\n            [goog.style :as style]\n            [com.fulcrologic.fulcro-css.localized-dom :as dom]\n            [com.fulcrologic.fulcro.components :as fp]\n            [nubank.workspaces.ui.events :as events]))\n\n(defn render-subtree-into-container [parent c node]\n  (js/ReactDOM.unstable_renderSubtreeIntoContainer parent c node))\n\n(defn $ [s] (.querySelector js/document s))\n\n(defn create-portal-node [props]\n  (let [node (doto (gdom/createElement \"div\")\n               (style/setStyle (clj->js (:style props))))]\n    (cond\n      (:append-to props) (gdom/append ($ (:append-to props)) node)\n      (:insert-after props) (gdom/insertSiblingAfter node ($ (:insert-after props))))\n    node))\n\n(defn portal-render-children [children]\n  (apply dom/div nil children))\n\n(fp/defsc Portal [this _]\n  {:componentDidMount\n   (fn [this]\n     (let [props (fp/props this)\n           node  (create-portal-node props)]\n       (gobj/set this \"node\" node)\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))\n\n   :componentWillUnmount\n   (fn [this]\n     (when-let [node (gobj/get this \"node\")]\n       (js/ReactDOM.unmountComponentAtNode node)\n       (gdom/removeNode node)))\n\n   :componentWillReceiveProps\n   (fn [this _]\n     (let [node (gobj/get this \"node\")]\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))\n\n   :componentDidUpdate\n   (fn [this _ _]\n     (let [node (gobj/get this \"node\")]\n       (render-subtree-into-container this (portal-render-children (fp/children this)) node)))}\n\n  (dom/noscript))\n\n(def portal (fp/factory Portal))\n\n(fp/defsc WidgetContent [this props]\n  {:css [[:.container {:max-height \"70vh\"\n                       :overflow   \"auto\"}]]}\n  (dom/div :.container props\n    (fp/children this)))\n\n(def widget-content (fp/factory WidgetContent))\n\n(fp/defsc Modal [this {::keys [on-close]\n                       :or    {on-close identity}}]\n  {:css         [[:.background {:position        \"fixed\"\n                                :left            0\n                                :top             0\n                                :background      \"rgba(0, 0, 0, 0.5)\"\n                                :width           \"100vw\"\n                                :height          \"100vh\"\n                                :display         \"flex\"\n                                :align-items     \"center\"\n                                :justify-content \"center\"\n                                :z-index         \"100\"\n                                :overflow-y      \"scroll\"}]\n                 [:.container {:display        \"flex\"\n                               :flex-direction \"column\"\n                               :max-width      \"90vw\"\n                               :max-height     \"80vh\"}]\n                 [:.close {:align-self     \"flex-end\"\n                           :color          \"white\"\n                           :cursor         \"pointer\"\n                           :font-size      \"10px\"\n                           :text-transform \"uppercase\"}]]\n   :css-include [WidgetContent]}\n  (portal {:append-to \"body\"}\n    (events/dom-listener {::events/keystroke \"escape\"\n                          ::events/action    on-close})\n    (dom/div :.background {:onClick (fn [e]\n                                      (if (= (.-currentTarget e) (.-target e))\n                                        (on-close e)))}\n      (dom/div :.container\n        (dom/div\n          (fp/children this))))))\n\n(def modal (fp/factory Modal))\n"]}